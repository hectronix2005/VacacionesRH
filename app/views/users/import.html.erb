<% content_for :title, "Importar usuarios" %>

<div class="max-w-2xl mx-auto mt-8">
  <h1 class="text-2xl font-bold mb-4">Importar o actualizar usuarios</h1>

  <% if flash[:alert] %>
    <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
      <%= flash[:alert] %>
    </div>
  <% end %>
  <% if flash[:notice] %>
    <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
      <%= flash[:notice] %>
    </div>
  <% end %>

  <div class="mb-6">
    <p class="text-gray-700 mb-2">
      Sube un archivo CSV con los usuarios a importar o actualizar. Si el documento o correo ya existe, el usuario será actualizado.
    </p>
    <ul class="text-sm text-gray-600 list-disc ml-6 mb-2">
      <li>Columnas requeridas: <strong>documento, nombre, correo, telefono, pais, area, empresa, rol</strong></li>
      <li>Opcionales: <strong>fecha_ingreso, lider_documento, cargo, dias_laborales</strong></li>
      <li>El password por defecto para nuevos usuarios será <code>123456</code></li>
    </ul>
    <div class="mt-4">
      <h4 class="font-medium text-blue-900 mb-2">Ejemplo de CSV:</h4>
      <p><a href="<%= asset_path("sample_user.csv") %>" class="text-red-900">Descargar archivo de ejemplo</a></p>
    </div>
  </div>

  <%= form_with url: import_users_path, method: :post, local: true, html: { multipart: true, class: "space-y-4" } do |form| %>
    <div>
      <%= form.label :import_file, "Seleccionar archivo", class: "block text-sm font-medium text-gray-700 mb-2" %>
      <%= form.file_field :import_file,
                          accept: ".csv",
                          required: true,
                          class: "block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" %>
      <p class="mt-1 text-sm text-gray-500">Acepta archivos CSV. Máximo 10MB.</p>
    </div>
    <div>
        <%= form.submit "Importar", class: "inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-white hover:bg-blue-700" %>
        <%= link_to "Cancelar", users_path, class: "ml-4 text-blue-600 hover:underline" %>
    </div>
  <% end %>
</div>
